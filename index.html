<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ポートフォリオサイト</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="firebase.js"></script>
    <script type="module" src="auth.js"></script> <!-- 新しいファイルで認証機能を管理 -->
    <script type="module" src="language.js"></script> <!-- 言語管理用のスクリプト -->
</head>
<body>
    <div class="lang-buttons">
        <button id="lang-en" class="lang-button">EN</button>
        <button id="lang-ja" class="lang-button">JP</button>
    </div>

    <div class="container">
        <div class="form-section">
            <h1 id="registerTitle">ユーザー登録</h1>
            <input type="email" id="email" placeholder="メールアドレス" required>
            <input type="password" id="password" placeholder="パスワード" required>
            <button id="registerButton" class="small-button">登録</button>
        </div>

        <div class="form-section">
            <h1 id="loginTitle">ログイン</h1>
            <input type="email" id="loginEmail" placeholder="メールアドレス" required>
            <input type="password" id="loginPassword" placeholder="パスワード" required>
            <button id="loginButton" class="small-button">ログイン</button>
        </div>

        <div id="errorModal" class="modal">
            <div class="modal-content">
                <span class="close" id="closeModal">&times;</span>
                <p id="modalMessage"></p>
            </div>
        </div>
    </div>

    <script>
        import { languageData, getCurrentLanguage } from "./language.js"; // 言語データをインポート

        let currentLanguage = getCurrentLanguage(); // 初期言語を取得

        function updateUI() {
            document.getElementById('registerTitle').textContent = languageData[currentLanguage].registerTitle;
            document.getElementById('loginTitle').textContent = languageData[currentLanguage].loginTitle;
            document.getElementById('registerButton').textContent = languageData[currentLanguage].registerButton;
            document.getElementById('loginButton').textContent = languageData[currentLanguage].loginButton;
            document.getElementById('closeModal').textContent = languageData[currentLanguage].modalClose;
        }

        function showError(message) {
            document.getElementById('modalMessage').textContent = message;
            document.getElementById('errorModal').style.display = 'block';
        }

        document.getElementById('registerButton').addEventListener('click', () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // 簡単なバリデーション
            if (!email || !password) {
                showError(languageData[currentLanguage].errorMessage);
                return;
            }

            // Firebaseのユーザー登録処理を呼び出す
            // registerUser(email, password); // Firebaseの関数をここに追加
        });

        document.getElementById('loginButton').addEventListener('click', () => {
            const loginEmail = document.getElementById('loginEmail').value;
            const loginPassword = document.getElementById('loginPassword').value;

            // 簡単なバリデーション
            if (!loginEmail || !loginPassword) {
                showError(languageData[currentLanguage].errorMessage);
                return;
            }

            // Firebaseのログイン処理を呼び出す
            // loginUser(loginEmail, loginPassword); // Firebaseの関数をここに追加
        });

        document.getElementById('closeModal').onclick = function() {
            document.getElementById('errorModal').style.display = 'none';
        };

        document.getElementById('lang-ja').addEventListener('click', () => {
            currentLanguage = 'ja';
            updateUI();
        });

        document.getElementById('lang-en').addEventListener('click', () => {
            currentLanguage = 'en';
            updateUI();
        });

        // 初期UIの更新
        updateUI();
    </script>
</body>
</html>
